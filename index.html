<!DOCTYPE html>
<html>
  <head>
    <title>Steven Food Inc</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="stylesheet" href="main.css">
    <script async
    src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap&v=weekly"
    defer>
    </script>
    <script src="https://cdn.withpersona.com/dist/persona-v4.6.0.js"></script>
    <script>
      const client = new Persona.Client({
        templateId: "itmpl_NoybydNL9ExcJaf27Astou77",
        environment: "production",
        onReady: () => client.open(),
        onComplete: ({ inquiryId, status, fields }) => {
          // Inquiry completed. Optionally tell your server about it.
          console.log(`Sending finished inquiry ${inquiryId} to backend`);
        },
        onCancel: ({ inquiryId, sessionToken }) => console.log('onCancel'),
        onError: (error) => console.log(error),
      });
    </script>
  </head>
  <body>
    <h3>Steven Food Map</h3>
    <!--The div element for the map -->
    <div id="map"></div>

    <script type="text/javascript">
      var locations = [
        ['Stumptown Coffee Roasters',35.01130598642082, 135.76049387273298,10],
        ['Smart Coffee',35.01067329597341, 135.76710283543494,9],
        ['Starbucks Kyoto',35.01095449233202, 135.76718866611935,8],
        ['Weekenders Coffee',35.0080721838287, 135.76461374558613,7],
        ['Drip & Drop Coffe',35.006263774927305, 135.7685078537702,6],
        ['Arabica Kyoto Arashiyama',35.013911257076884, 135.67650940946982,5]
        ['Coffee Block',34.99702018891987, 135.74931442862967,4],
        ['Kurasu Kyoto Stand',34.98671161972425, 135.75386182862974,3],
        ['Blue Bottle Coffee Kyoto',35.00779248468596, 135.76115131328748,2],
        ['58 Cafe Coffee House',34.99568944882778, 135.78192642862973,1]
      ];
      
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 12,
        center: new google.maps.LatLng(35.01, 135.75),
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });
      
      var infowindow = new google.maps.InfoWindow();
  
      var marker, i;
      
      for (i = 0; i < locations.length; i++) {  
        marker = new google.maps.Marker({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          map: map
        });
        
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
          return function() {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
          }
        })(marker, i));
      }
    </script>
  </body>
</html>
